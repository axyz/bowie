#!/usr/bin/env ruby

require 'bowie'
require 'thor'

class BowieCLI < Thor

  Bowie.get_songs
  Bowie.get_local_songs
  Bowie.get_local_lyrics
  
  desc "install song", "install the selected package"
  def install(*songs)
    Bowie.install(*songs)
  end

  desc "update song", "update the selected package"
  def update(*songs)
    Bowie.update(*songs)
  end

  desc "uninstall song", "remove the selected package"
  def uninstall(*songs)
    Bowie.uninstall(*songs)
  end

  desc "search song", "list all availables packages matching [song]"
  def search(song)
    results = Bowie.search(song)
    results.each { |key, values| puts "#{values['name']}:\n  #{values['description']}" }
  end
end

BowieCLI.start(ARGV)